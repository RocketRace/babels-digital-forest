{{ $initialBanners := 0 }}
{{ $pageBaseUrl := "http://localhost:8000" }}
{{ $imageBaseUrl := "https://88x31er.vercel.app/img" }}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>unnamed</title>
    <!-- meta stuff -->
    <meta property="og:title" content="unnamed">
    <meta property="og:locale" content="en_US">
    <meta name="description" content="undescribed">
    <meta property="og:description" content="undescribed">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary">
    <meta property="twitter:title" content="unnamed">
    <!-- assets -->
    <link rel="icon" href="./favicon.ico" />
    <link rel="stylesheet" href="./style.css">
    {{ with resources.Get "main.ts" }}
        {{ with . | js.Build (dict 
            "target" "es2020"
            "format" "esm"
            "params" (dict 
                "initialBanners" $initialBanners
                "pageBaseUrl" $pageBaseUrl
                "imageBaseUrl" $imageBaseUrl
            )
        ) }}
            <script src="{{ .RelPermalink }}" defer></script>
        {{ end }}
    {{ end }}
</head>
<body>
    <main>
        <div id="scroller">
            <div id="squisher">
                <article>
                    <h1>unnamed</h1>
                    <p>
                        Jorge Luis Borges' <em>Library of Babel</em> depicts a universe
                        of endless bookshelves, containing every single combination of
                        letters that fits in a 410-page book. [random order, contains
                        all true and false information]
                    </p>
                    <p>
                        Borges' conceptualization of the infinite <em>library</em> in
                        particular has some interesting philosophical implications.
                        A library represents curated knowledge through written
                        information.
                    </p>
                    <noscript>
                        Please enable JavaScript to use this page.
                    </noscript>
                </article>
                <div id="loader">
                    <label id="top" hidden>
                        Loading...
                        <progress></progress>
                    </label>
                    <div id="banners">
                        <!-- Banners are populated here. The first page is pregenerated. -->
                        {{- range seq $initialBanners -}}
                            <a href="{{ $imageBaseUrl }}/{{ sub . 1 }}" target="_blank">
                                <canvas id="x{{ sub . 1 | printf "%x" }}" width="88" height="31"></canvas>
                            </a>
                        {{- end -}}
                    </div>
                    <label id="bottom">
                        Loading...
                        <progress></progress>
                    </label>
                </div>
            </div>
        </div>
    </main>
    <footer>
        <meter min="0" max="65536" value="0" id="position"></meter>
        <div>
            <label>
                Jump to entry
                <input type="string" id="goto"></input>
            </label>
            <button id="jump">Jump</button>
        </div>
        <div>
            <label>
                Search by image
                <input type="file" id="image" accept="image/*,.gif"></input>
            </label>
            <button id="search">Search</button>
        </div>
        <div>
            <button id="scroll">Scroll to top</button>
        </div>
    </footer>
</body>
</html>
